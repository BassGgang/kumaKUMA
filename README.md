# クマ認識・警告システム (スタンドアローン版)

## 概要

このプログラムは、Webカメラや動画ファイルからリアルタイムで映像を解析し、AI（YOLOv8モデル）を使って「クマ」を検出すると、画面表示と警告音で通知するシステムです。

元々はWebブラウザ上で動作するアプリケーションでしたが、オフライン環境のマイクロコンピュータ（マイコン）などでの利用を想定し、Pythonのみで独立して動作するように作り直したものです。

## 主な機能

- **リアルタイム映像解析**: PCに接続されたカメラの映像をリアルタイムで処理します。
- **クマの検出**: AIモデル(YOLOv8) を利用して、映像の中からクマを検出します。
- **視覚的な警告**: 検出したクマを映像上で赤い四角で囲んで表示します。
- **音声による警告**: クマを検出すると、警告音（`alert.mp3`）を再生します。

## 実行方法

このプログラムを動かすための手順です。

### ステップ１：コマンド入力ツールを開く

まず、「ターミナル」というアプリを探して開きます。
これは、Macに標準で入っている、文字でコンピュータに命令を出すためのツールです。

> **探し方**: `command` + `space` キーを同時に押して検索窓を出し、「`terminal`」と入力してEnterキーを押します。

### ステップ２：プロジェクトの場所に移動する

ターミナルが開いたら、このプロジェクトのフォルダ（`KUMA`フォルダ）に移動します。
以下の命令文をターミナルに貼り付けて、Enterキーを押してください。

```bash
cd /path/to/your/KUMA
```
_(注: `/path/to/your/KUMA` の部分は、実際のフォルダの場所に合わせて書き換えてください。このプロジェクトの場合は `/Users/matsunagakenta/Desktop/KUMA` です)_

### ステップ３：必要な道具（ライブラリ）を準備する

次に、プログラムが動くために必要な「道具」（ライブラリ）をパソコンにインストールします。
**この作業は、最初の１回だけ行えばOKです。**

以下の命令文をターミナルに貼り付けて、Enterキーを押してください。

```bash
pip install -r server/requirements.txt
```
これにより、カメラを扱うための`opencv-python`や、AIモデルを動かす`ultralytics`などが自動でインストールされます。

### ステップ４：プログラムを実行する

準備が整いました。以下の命令文でプログラムを実行します。

```bash
python run_app.py
```

### 実行後の操作

- コマンドを実行すると、`Bear Detection System` という名前のウィンドウが開き、カメラの映像が映し出されます。
- AIがクマを検出すると、映像の中で対象が**赤い四角**で囲まれ、**警告音**が鳴ります。
- プログラムを終了するには、カメラ映像のウィンドウを選択した状態で、キーボードの **`q`** キーを押してください。

## 設定の変更

`run_app.py` ファイルの中身を少し書き換えることで、設定を変更できます。

- **使用するカメラを変えたい場合**:
  `VIDEO_SOURCE = 0` の `0` を別の数字（例: `1`）に変更します。

- **動画ファイルで試したい場合**:
  `VIDEO_SOURCE = 0` を `"動画ファイルのパス.mp4"` のように書き換えます。（例: `"my_video.mp4"`）
